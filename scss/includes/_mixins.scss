@use "sass:selector";
@use "sass:map";

@mixin colorMixin($cls, $prop, $dk: '', $dkv: '') {

    @if ($dk == '') {
        #{$Id}.#{$P}#{$cls}-\? {
            #{$prop}: var(--#{$dkv}#{$cls})#{$I};
        }
    } @else {
        #{$Id}.#{$dk}#{$cls}-\? {
            #{$prop}: var(--#{$dkv}#{$cls})#{$I};
        }
    }
    
    @each $variant, $prefix in $ColorVariants {
        @if $variant == 'group-hover' {
            #{$Id}.group:hover .#{$dk}#{$prefix}\:#{$cls}-\? {
                #{$prop}: var(--#{$dkv}#{$prefix}-#{$cls})#{$I};
            }
        }
        @else if $variant == 'group-focus' {
            #{$Id}.group:focus .#{$dk}#{$prefix}\:#{$cls}-\? {
                #{$prop}: var(--#{$dkv}#{$prefix}-#{$cls})#{$I};
            }
        }
        @else if $variant == 'class' {
            #{selector.append($ActiveClasses, ".#{$dk}#{$prefix}\\:#{$cls}-\\?")} {
                #{$prop}: var(--#{$dkv}#{$prefix}-#{$cls})#{$I};
            }
        }
        @else if $variant == 'group-class' {
            #{selector.nest($ActiveClasses, ".#{$dk}#{$prefix}\\:#{$cls}-\\?")} {
                #{$prop}: var(--#{$dkv}#{$prefix}-#{$cls})#{$I};
            }
        }
        @else {
            #{$Id}.#{$dk}#{$prefix}\:#{$cls}-\?:#{$variant} {
                #{$prop}: var(--#{$dkv}#{$prefix}-#{$cls})#{$I};
            }
        }
    }

    @each $element, $pseudo in $PseudoElements {
        #{$Id}.#{$dk}#{$pseudo}\:#{$cls}-\?::#{$element} {
            #{$prop}: var(--#{$dkv}#{$pseudo}-#{$cls})#{$I};
        }
        @each $variant, $prefix in $PseudoVariants {
            #{$Id}.#{$dk}#{$pseudo}\:#{$prefix}\:#{$cls}-\?:#{$variant}::#{$element} {
                #{$prop}: var(--#{$dkv}#{$pseudo}-#{$prefix}-#{$cls})#{$I};
            }
        }
    }
}
